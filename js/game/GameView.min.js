viewScoreboard=function(a){this.TextLable=a};viewScoreboard.prototype.LobbyMode=function(){$("#Mode-2").hide();$("#Mode-1").show()};viewScoreboard.prototype.GameMode=function(){$("#Mode-1").hide();$("#Mode-2").show()};
viewScoreboard.prototype.LobbiesListRefresh=function(a,b){Array.isArray(a)||(a=[]);var c="";for(LobbyIndex=0;LobbyIndex<a.length;LobbyIndex++)c=c+'<div class="Lobby" id="'+a[LobbyIndex].ID+'" onClick="'+b+"("+a[LobbyIndex].ID+')"> \t\t\t<div class="Lobby-Name" title="'+this.TextLable.Name+'">'+a[LobbyIndex].Name+'</div> \t\t\t<div class="Lobby-Settings" title="'+this.TextLable.Features+'">'+this.TextLable.Player+": "+a[LobbyIndex].PlayersNumber+"&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;"+this.TextLable.Color+
": "+a[LobbyIndex].ColorsNumber+"&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;"+this.TextLable.Size+": "+a[LobbyIndex].SizeX+" x "+a[LobbyIndex].SizeY+"</div>\t\t</div>";$("#LobbiesList").html(c);$("#LobbiesQuantity").html(this.TextLable.InTotal+": "+a.length);$("#LobbiesQuantity-xs").html(this.TextLable.InTotal+": "+a.length)};
viewScoreboard.prototype.CompetitorsListRefresh=function(a,b){var c="",d,e;for(PlayerIndex=0;PlayerIndex<a.length;PlayerIndex++)a[PlayerIndex].Status?(d="Player-Active",e=this.TextLable.Free,PlayerStatusCSS="Player-Status-Active"):(d="Player-NotActive",e=this.TextLable.Busy,PlayerStatusCSS=""),c=c+'<div class="Player '+d+'" id="'+a[PlayerIndex].ID+'" onClick="'+b+"("+a[PlayerIndex].ID+')"> \t\t\t <div class="Player-Name" title="'+this.TextLable.PlayerName+'">'+a[PlayerIndex].Name+'</div> \t\t\t <div class="Player-WinningStreak" title="'+
this.TextLable.WinningStreak+'">&#9733; '+a[PlayerIndex].WinningStreak+'</div> \t\t\t <div class="Player-Rating" title="'+this.TextLable.Rating+'">'+a[PlayerIndex].Rating+'</div> \t\t\t <div class="Player-Status '+PlayerStatusCSS+'" title="'+this.TextLable.PlayerStatus+'">&nbsp;'+e+"</div> \t\t</div>";$("#PlayersList").html(c);$("#PlayersQuantity").html(this.TextLable.InTotal+": "+a.length)};viewScoreboard.prototype.GamePlayersHide=function(){$("#PlayersList-1").html("");$("#PlayersList-2").html("")};
viewScoreboard.prototype.GamePlayersShow=function(a){var b=this;Array.isArray(a)&&a.forEach(function(a,d){d/2==Math.floor(d/2)?$("#PlayersList-1").html($("#PlayersList-1").html()+b.GamePlayerAdd(a)):$("#PlayersList-2").html($("#PlayersList-2").html()+b.GamePlayerAdd(a))})};
viewScoreboard.prototype.GamePlayerAdd=function(a){return'<div class="col-xs-24 Player-Box" id="PlayerID-'+a.ID+'"> \t\t\t\t<div class="col-xs-16 Player-Box-1" id="NamePlayerID-'+a.ID+'">'+a.Name+'</div> \t\t\t\t<div class="col-xs-8 Player-Box-2" id="PortionPlayerID-'+a.ID+'">0%</div> \t\t\t\t<div class="col-xs-18 Player-Box-3" id="PointsPlayerID-'+a.ID+'">'+this.TextLable.Point+': 0</div> \t\t\t\t<div class="col-xs-6 Player-Box-4" id="IncrementPlayerID-'+a.ID+'"></div> \t\t\t\t<div class="col-xs-24 Player-Box-5" id="TimePlayerID-'+
a.ID+'"></div> \t\t\t</div>'};viewScoreboard.prototype.GamePlayerHighlight=function(a){$(".NextMoveIndicator").removeClass("NextMoveIndicator");$("#PlayerID-"+a).addClass("NextMoveIndicator");$(".Player-Box-5").html("")};
viewScoreboard.prototype.PlayersScoreRefresh=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a,e){$("#PointsPlayerID-"+a.ID).html(c.TextLable.Point+": "+a.Points);$("#PortionPlayerID-"+a.ID).html(a.Portion+"%");var f="";a.LastMove&&(f="+"+a.LastMove.CellNumber);$("#IncrementPlayerID-"+a.ID).html(f+'<div class="Player-Color" id="Player-Color-'+a.ID+'"></div>');$("#Player-Color-"+a.ID).css({"background-color":"#"+b[a.ColorIndex-1]})})};
viewScoreboard.prototype.PlayerTimerRefresh=function(a,b){var c=new Date(1E3*b),d=c.getMinutes(),d=10>d?"0"+d:d,c=c.getSeconds(),c=10>c?"0"+c:c;$("#TimePlayerID-"+a).html(d+":"+c)};viewScoreboard.prototype.SoundIconRefresh=function(a){a?($("#Button-Sound").removeClass("Sound-Label-On"),$("#Button-Sound").addClass("Sound-Label-Off")):($("#Button-Sound").removeClass("Sound-Label-Off"),$("#Button-Sound").addClass("Sound-Label-On"))};viewPlayer=function(){};
viewPlayer.prototype.StatisticsRefresh=function(a){"undefined"!==typeof a.TotalGames&&null!==a.TotalGames&&($("#PlayerGames").html(a.TotalGames),$("#PlayerGames-xs").html(a.TotalGames));"undefined"!==typeof a.WinGames&&null!==a.WinGames&&($("#PlayerWinnings").html(a.WinGames),$("#PlayerGames-xs").html(a.WinGames));"undefined"!==typeof a.Rating&&null!==a.Rating&&($("#PlayerRating").html(a.Rating),$("#PlayerRating-xs").html(a.Rating))};
var ModalControl={State:!0,ID:null,Show:function(a){this.State?(this.State=!1,$("#"+a).modal("show")):this.ID=a},Hide:function(){this.ID?($("#"+this.ID).modal("show"),this.ID=null):this.State=!0}};DialogWindow=function(a,b,c){this.ID=a;this.Callback;this.Options=b;Array.isArray(c)&&$.each(c,function(a,b){$("#"+b).hide()})};DialogWindow.prototype.Show=function(){ModalControl.Show(this.ID.Window)};DialogWindow.prototype.Hide=function(){$("#"+this.ID.Window).modal("hide")};
DialogWindow.prototype.CaptionSet=function(a){$("#"+this.ID.Caption).html(a)};DialogWindow.prototype.MessageSet=function(a){$("#"+this.ID.Message).html(a)};DialogWindow.prototype.ButtonSet=function(a,b){$("#"+a).html(b);b?$("#"+a).show():$("#"+a).hide()};DialogWindow.prototype.LoadingShow=function(){$("#"+this.ID.Loading).show()};DialogWindow.prototype.LoadingHide=function(){$("#"+this.ID.Loading).hide()};
$(document).ready(function(){LobbyDialog=new DialogWindow({Window:"LobbyDialog",Caption:"LobbyTitle",Settings:"LobbyDialog-LobbySettings",Loading:"LobbyDialog-Loading"},{TextLable:DIALOG.LobbyViewDialog});LobbyDialog.MasterModeOn=function(){$("#GameStartButton").show();$("#LobbyJoinButton").hide()};LobbyDialog.MasterModeOff=function(){$("#GameStartButton").hide();$("#LobbyJoinButton").show()};LobbyDialog.ExpireMode=function(){$("#GameStartButton").hide();$("#LobbyJoinButton").hide()};LobbyDialog.PlayersListSet=
function(a){var b="";Array.isArray(a)?(a.forEach(function(a,d){b=b+(d+1)+". "+a.Name+"<br><br>"}),b+="<br>"):b="1. "+a+"<br><br><br>";$("#LobbyPlayersList").html(b)};LobbyDialog.TipSet=function(a){$("#LobbyTip").html(a)};LobbyDialog.Configuration=function(a,b,c,d){$("#"+this.ID.Settings).html(this.Options.TextLable.Settings.Player+": "+a+"&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;"+this.Options.TextLable.Settings.Color+": "+b+"&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;"+this.Options.TextLable.Settings.Size+
": "+c+" x "+d)};LobbyDialog.ButtonSet=function(a,b){$("#"+a).attr("disabled",b)};LobbyDialog.ButtonEnabled=function(a){$("#"+a).attr("disabled",!1)};LobbyDialog.ButtonDisabled=function(a){$("#"+a).attr("disabled",!0)};LobbyDialog.Refresh=function(a,b){"undefined"!==typeof a&&"object"===typeof a&&(this.CaptionSet(a.Name),this.Configuration(a.PlayersNumber,a.ColorsNumber,a.SizeX,a.SizeY),this.PlayersListSet(a.GetPlayersList()),a.Active?a.GetCreatorID()==b?(a.isFullPlayersList()?(this.TipSet(this.Options.TextLable.Tip.Start),
this.ButtonEnabled("GameStartButton")):(this.TipSet(this.Options.TextLable.Tip.WaitPlayers),this.ButtonDisabled("GameStartButton")),this.ButtonDisabled("LobbyClose"),this.MasterModeOn()):(a.isPlayerIncluded(b)?(a.isFullPlayersList()?this.TipSet(this.Options.TextLable.Tip.WaitStart):this.TipSet(this.Options.TextLable.Tip.WaitPlayers),this.ButtonDisabled("LobbyJoinButton"),this.ButtonDisabled("LobbyClose")):(a.isFullPlayersList()?(this.TipSet(this.Options.TextLable.Tip.NoPlace),this.ButtonDisabled("LobbyJoinButton")):
(this.TipSet(this.Options.TextLable.Tip.WaitPlayers),this.ButtonEnabled("LobbyJoinButton")),this.ButtonEnabled("LobbyClose"),this.TimerRefresh()),this.MasterModeOff()):(this.TipSet(this.Options.TextLable.Tip.Expire),this.ExpireMode(),this.ButtonEnabled("LobbyClose"),this.TimerRefresh()))};LobbyDialog.TimerRefresh=function(a){if("undefined"===typeof a)$("#LobbyTimer").html("");else{var b=new Date(1E3*a);a=b.getMinutes();a=10>a?"0"+a:a;b=b.getSeconds();b=10>b?"0"+b:b;$("#LobbyTimer").html(a+":"+b)}};
MessageDialog=new DialogWindow({Window:"MessageDialog",Caption:"MessageDialog-Caption",Message:"MessageDialog-Message",YesButton:"MessageDialog-YesButton",NoButton:"MessageDialog-NoButton",Loading:"MessageDialog-Loading"},{TextLable:DIALOG.MessageDialog});MessageDialog.Show=function(a,b){this.Set(a,b);ModalControl.Show(this.ID.Window)};MessageDialog.Hide=function(){$("#"+this.ID.Window).modal("hide")};MessageDialog.Set=function(a,b){"undefined"!==typeof a&&1==a.Loading?this.LoadingShow():this.LoadingHide();
"undefined"!==typeof a&&"string"===typeof a.Caption&&this.CaptionSet(a.Caption);"undefined"!==typeof a&&"string"===typeof a.Message&&this.MessageSet(a.Message);"undefined"!==typeof a&&"string"===typeof a.MessageURL&&this.MessageLoad(a.MessageURL);"undefined"!==typeof a&&"string"===typeof a.YesButton&&this.YesButtonSet(a.YesButton);"undefined"!==typeof a&&"string"===typeof a.NoButton&&this.NoButtonSet(a.NoButton);this.Callback=b};MessageDialog.MessageLoad=function(a){this.MessageSet("");this.LoadingShow();
var b=this;$.post(a,{},function(a){b.LoadingHide();b.MessageSet(a)},"text")};MessageDialog.YesButtonSet=function(a){this.ButtonSet(this.ID.YesButton,a)};MessageDialog.NoButtonSet=function(a){this.ButtonSet(this.ID.NoButton,a)};MessageDialog.PlayerViewGet=function(a,b,c){if("undefined"!==typeof b&&"object"===typeof b)return b='<div class="col-xs-10 player-data-lable">'+this.Options.TextLable.PlayerName+':</div><div class="col-xs-14 player-data">'+b.Name+'</div> \t\t\t<div class="col-xs-10 player-data-lable">'+
this.Options.TextLable.Rating+':</div><div class="col-xs-14 player-data">'+b.Rating+'</div> \t\t\t<div class="col-xs-10 player-data-lable">'+this.Options.TextLable.GamesNumber+':</div><div class="col-xs-14 player-data">'+b.TotalGames+'</div> \t\t\t<div class="col-xs-10 player-data-lable">'+this.Options.TextLable.WinsNumber+':</div><div class="col-xs-14 player-data">'+b.WinGames+'</div> \t\t\t<div class="col-xs-10 player-data-lable">'+this.Options.TextLable.WinningStreak+':</div><div class="col-xs-14 player-data">'+
b.WinningStreak+"</div>",c&&(b=b+'<div class="col-xs-24 indent-top-md color-orange cursor-pointer" title="\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043b\u043e\u0431\u0431\u0438 \u0438\u0433\u0440\u043e\u043a\u0430" onClick="'+a+"("+c+')">\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043b\u043e\u0431\u0431\u0438</div>'),b};MessageDialog.YesButtonClick=function(){"undefined"!==typeof this.Callback&&"function"===typeof this.Callback.YesButton&&this.Callback.YesButton()};MessageDialog.NoButtonClick=
function(){"undefined"!==typeof this.Callback&&"function"===typeof this.Callback.NoButton&&this.Callback.NoButton()};LobbyCreateDialog=new DialogWindow({Window:"LobbyCreateDialog",Caption:"LobbyLabel"},{ColorsNumberList:{x2players:{6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},x4players:{10:"10",11:"11",12:"12",13:"13",14:"14",15:"15",16:"16"}},SizeList:{A:{X:18,Y:12},B:{X:24,Y:16},C:{X:30,Y:20}}});LobbyCreateDialog.Init=function(){$("#LobbyName").val("");$("#LobbyName").focus()};LobbyCreateDialog.ColorsNumberListSet=
function(a){var b=this.ColorsNumberGet(),c=this.Options.ColorsNumberList.x2players;$("#ColorsNumber").empty();4==a&&(c=this.Options.ColorsNumberList.x4players);$.each(c,function(a,b){$("#ColorsNumber").append('<option value="'+a+'">'+b+"</option>")});this.ColorsNumberSet(b)};LobbyCreateDialog.ColorsNumberGet=function(){return $("#ColorsNumber").val()};LobbyCreateDialog.ColorsNumberSet=function(a){$("#ColorsNumber [value='"+a+"']").attr("selected","selected")};LobbyCreateDialog.LobbyNameGet=function(){return $("#LobbyName").val()};
LobbyCreateDialog.PlayersNumberGet=function(){var a=2;$("#x4Players").is(":checked")&&(a=4);return a};LobbyCreateDialog.SizeGet=function(){if($("#SizeA").is(":checked"))return this.Options.SizeList.A;if($("#SizeB").is(":checked"))return this.Options.SizeList.B;if($("#SizeC").is(":checked"))return this.Options.SizeList.C};LobbyCreateDialog.ErrorShow=function(){$("#DivLobbyName").addClass("has-error");$("#LobbyName").focus();$("#LobbyName").tooltip("show")};LobbyCreateDialog.ErrorHide=function(){$("#DivLobbyName").removeClass("has-error")};
$("#LobbyName").keypress(LobbyCreateDialog.ErrorHide);$("#x2PlayersLable").click(function(){LobbyCreateDialog.ColorsNumberListSet(2)});$("#x4PlayersLable").click(function(){LobbyCreateDialog.ColorsNumberListSet(4)});$("#LobbyCreateDialog").on("hidden.bs.modal",function(){$("#LobbyName").val("");ModalControl.Hide()});$("#LobbyCreateDialog").on("shown.bs.modal",function(){$("#LobbyName").focus()});$("#MessageDialog").on("hidden.bs.modal",function(){ModalControl.Hide()});$("#LobbyDialog").on("hidden.bs.modal",
function(){ModalControl.Hide()});$("#MessageDialog-YesButton").click(function(){MessageDialog.YesButtonClick()});$("#MessageDialog-NoButton").click(function(){MessageDialog.NoButtonClick()})});
